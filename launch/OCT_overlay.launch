<?xml version="1.0"?>
<launch>
    <node pkg="camera" type="camera_node" name="stereocamera">
    	<!-- possible values: usb_cam, opencv, uvc_cam, video_file -->
		<param name="cameraDriver" type="string" value="image_file"/>
		<param name="stereoCamera" type="bool" value="true" />
		<param name="left/videoDevice" type="string" value="/opt/image_dataset/
		    tmi_evaluation/Stereo_SD_d_all/Stereo_SD_d_all_$(arg file_no)/
		    Stereo_SD_d_all_$(arg file_no)_IMG_left.bmp"/>
		<param name="right/videoDevice" type="string" value="/opt/image_dataset/
		    tmi_evaluation/Stereo_SD_d_all/Stereo_SD_d_all_$(arg file_no)/
		    Stereo_SD_d_all_$(arg file_no)_IMG_right.bmp" />
		<param name="imageWidth" type="int" value="720" />
    	<param name="imageHeight" type="int" value="576" />
		<param name="left/image180" type="bool" value="false"/>
		<param name="right/image180" type="bool" value="false"/>
		<!-- fps currently only at uvc_cam and video_file -->
    	<param name="fps" type="double" value="25" />
		<!-- usb_cam: mmap, read, userptr -->
		<!-- opencv, uvc_cam: - (use mmap) -->
		<param name="ioMethod" type="string" value="mmap" />
    	<!-- usb_cam: yuyv, uyvy, mjpeg -->
		<!-- opencv: yuyv, uyvy, mjpeg, rgb -->
		<!-- uvc_cam: yuyv, mjpeg, rgb -->
		<param name="pixelFormat" type="string" value="yuyv" />
		<!-- show live image in opencv window -->
		<param name="showImage" type="bool" value="false"/>
		<!-- publisher name -->
		<param name="publishingTopicName" type="string" value="image"/>
		<!-- halt at image -->
    	<param name="haltAtImage" type="int" value="-1" />
  	</node>

	<node pkg="stereomatching" type="stereomatching_node" name="stereomatching" 
	    output="screen">
		<param name="leftImageTopicName" type="string" value="/stereocamera/
		    left/image"/>
		<param name="rightImageTopicName" type="string" value="/stereocamera/
		    right/image"/>
		<param name="visualizationOn" type="bool" value="false"/>
		<param name="publishRectifiedImages" type="bool" value="true"/>
		<param name="publishDispMap" type="bool" value="true"/>
		<param name="publishDepthMap" type="bool" value="true"/>
		<param name="publishSurfacePoints" type="bool" value="false"/>
		<rosparam command="load" ns="left" file="/opt/image_dataset/
		    tmi_evaluation/Stereo_SD_d_all/Stereo_SD_d_all_$(arg file_no)/
		    calibration_left.yaml" />
		<rosparam command="load" ns="right" file="/opt/image_dataset/
		    tmi_evaluation/Stereo_SD_d_all/Stereo_SD_d_all_$(arg file_no)/
		    calibration_right.yaml" />
		<rosparam command="load" file="/opt/image_dataset/tmi_evaluation/
		    Stereo_SD_d_all/Stereo_SD_d_all_$(arg file_no)/
		    calibration_stereo.yaml" />
		<param name="ROI_x" type="int" value="0"/>
		<param name="ROI_y" type="int" value="0"/>
		<param name="ROI_width" type="int" value="720"/>
		<param name="ROI_height" type="int" value="576"/>
		<param name="dispMin" type="int" value="0"/>
		<param name="dispMax" type="int" value="60"/>
		<param name="useCensus" type="bool" value="false"/>
		<param name="censusRankWidth" type="int" value="11"/>
		<param name="censusRankHeight" type="int" value="11"/>
		<param name="costsWidth" type="int" value="30"/>
		<param name="costsHeight" type="int" value="30"/>
		<param name="thresholdLR" type="double" value="0.5"/>
		<param name="extendedLR" type="bool" value="false"/>
		<param name="thresholdCosts" type="double" value="0.0"/>		
		<param name="textureFilterWidth" type="int" value="1"/>
		<param name="textureFilterHeight" type="int" value="1"/>
		<param name="textureFilterThreshold" type="double" value="0.0"/>
		<param name="speckleSize" type="int" value="1000"/>
		<param name="speckleDispRange" type="double" value="0.5"/>
		<param name="zMin" type="double" value="0.0"/>
		<param name="zMax" type="double" value="1000.0"/>
		<param name="fastDisparity" type="bool" value="true"/>
		<param name="fastDisparityScaling" type="int" value="2"/>
		<param name="fastDisparityRefine" type="bool" value="true"/>
		<param name="fastDisparityRefineRadius" type="int" value="10"/>
		<param name="filterType" type="int" value="0"/>
		<param name="filterKernelSize" type="int" value="17"/>
		<param name="filterParam1" type="double" value="2.0"/>
		<param name="filterParam2" type="double" value="4.0"/>
		<param name="useJBF" type="bool" value="false"/>
		<param name="JBFilterKernelRadius" type="int" value="1"/>
		<param name="JBFilterParam1" type="double" value="1.0"/>
		<param name="JBFilterParam2" type="double" value="1.0"/>
		<param name="JBFRepetitions" type="int" value="1"/>
		<param name="repeatBF" type="bool" value="false"/>
	</node>
	
	<node pkg="oct_client" type="oct_client" name="oct_client" output="screen">
        <param name="serverIP" type="string" value="192.168.10.2"/>
    </node>
	
	<node pkg="OCT_registration" type="OCT_registration_node" 
	    name="OCT_registration" output="screen">
	</node>
	
	<node pkg="OCT_segmentation" type="OCT_segmentation_node" 
	    name="OCT_segmentation" output="screen">
	</node>

 	<node name="OCT_overlay" pkg="OCT_overlay" type="OCT_overlay" 
 	    output="screen">
		<param name="leftImageTopicName" type="string" value="/stereomatching/
		    image_left"/>
		<param name="rightImageTopicName" type="string" value="/stereomatching/
		    image_right"/>
		<param name="dispImageTopicName" type="string" value="/stereomatching/
		    disparity_map"/>
		<param name="depthImageTopicName" type="string" value="/stereomatching/
		    depth_map"/>
	</node>
</launch>
